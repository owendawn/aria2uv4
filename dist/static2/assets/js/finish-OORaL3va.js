import{T as p}from"./download-todo-8e94FCaX.js";import{_,r as h,o as w,a as T,c as d,d as r,e as l,F as v,f as y,J as g,s as k,l as c,m as o}from"./index-MTUZ50MT.js";const x={name:"finish",components:{ToDownload:p},setup(){let t=h({timeout:null,downloads:[]});const s=async()=>{t.timeout&&clearTimeout(t.timeout),g().then(async e=>{k.dispatch("filterStates",e.data);const n=e.data.filter(a=>a.id.indexOf("sendTellFinishREQ_")===0).map(a=>a.result);n&&n.length>0&&(t.downloads.length=0,t.downloads.push(...n[0])),t.timeout=setTimeout(s,1e3)})};return w(()=>{t.timeout&&clearTimeout(t.timeout)}),s(),{activeId:T("1"),data:t}}},D={key:1};function F(t,s,m,e,n,a){const u=c("van-empty"),f=c("ToDownload");return o(),d("div",null,[e.data.downloads.length===0?(o(),r(u,{key:0,description:"尚无任务"})):l("",!0),e.data.downloads.length>0?(o(),d("div",D,[(o(!0),d(v,null,y(e.data.downloads,i=>(o(),r(f,{key:i.id,todo:i},null,8,["todo"]))),128))])):l("",!0)])}const E=_(x,[["render",F]]);export{E as default};
