import{_ as x,r as h,A as v,l as d,m as u,d as S,w as i,b as r,p as c,t as l,n as s,e as k,v as g}from"./index-MTUZ50MT.js";const L={name:"download-todo",components:{},props:{todo:Object},setup(a){let e=h({downloadSpeedStr:0,completedLengthStr:0,uploadSpeedStr:0,totalLengthStr:0,network:0,percent:0,type:"",name:"",gid:""}),t=h(a.todo);const o=()=>{if(e.uploadSpeedStr=g.getSize(t.uploadSpeed)+"/s",e.downloadSpeedStr=g.getSize(t.downloadSpeed)+"/s",e.completedLengthStr=g.getSize(t.completedLength),e.totalLengthStr=g.getSize(t.totalLength),e.network=t.files.filter(n=>Number(n.completedLength)>=Number(n.length)).length+"/"+t.files.length,e.percent=t.totalLength==="0"?0:Math.round(t.completedLength/t.totalLength*1e4)/100,a.todo.bittorrent)a.todo.bittorrent.info?(e.type="Torrent",e.name="✪ "+a.todo.bittorrent.info.name):(e.type="Magnet",e.name="◑ "+a.todo.files[0].path);else{let n=a.todo.files[0].uris;!n||n.length==0?(e.type="Unknown",e.name="֍ 未知"):new RegExp("^ftp://").test(a.todo.files[0].uris[0].uri)?(e.type="FTP",e.name="☢ "+decodeURIComponent(n[0].uri.substring(n[0].uri.lastIndexOf("/")+1))):new RegExp("^https?://").test(a.todo.files[0].uris[0].uri)&&(e.type="HTTP/HTTPS",e.name="☪ "+decodeURIComponent(a.todo.files[0].path.substring(a.todo.files[0].path.lastIndexOf("/")+1)||n[0].uri.substring(n[0].uri.lastIndexOf("/")+1)))}};o();function _(){let n="∞";if(t.downloadSpeed!=="0"){let p=Number(t.totalLength)-Number(t.completedLength),f=Math.round(p/Number(t.downloadSpeed));n=Math.floor(f/60/60)+":"+Math.floor(f%(60*60)/60)+":"+Math.floor(f%60)}return n}return v(a,(n,p)=>{t=p.todo,e.gid=t.gid,o()}),{info:t,getCastTime:_,opt:e}}},T={style:{"text-align":"left","word-break":"break-all","font-weight":"bold"}},N=c("i",{class:"fa fa-signal"},null,-1),C=c("i",{class:"fa fa-magnet"},null,-1),z=c("i",{class:"fa fa-network-wired"},null,-1),I=c("i",{class:"fa fa-upload"},null,-1),M=c("i",{class:"fa fa-download"},null,-1);function O(a,e,t,o,_,n){const p=d("van-progress"),f=d("van-loading"),m=d("van-col"),w=d("van-row"),y=d("van-cell"),b=d("router-link");return u(),S(b,{to:{path:"/downloadItem",query:{gid:o.opt.gid}}},{default:i(()=>[r(y,{"is-link":"",icon:""},{title:i(()=>[c("div",T,l(o.opt.name),1),r(p,{percentage:o.opt.percent,style:{margin:"6px 0"}},null,8,["percentage"]),r(w,{gutter:"20",style:{"font-size":"0.5rem",color:"#817e7e"}},{default:i(()=>[r(m,{span:"8",style:{"text-align":"left","min-width":"140px"}},{default:i(()=>[N,s(" "+l(o.info.connections)+" ",1),C,s(" "+l(o.info.numSeeders)+" ",1),z,s(" "+l(o.opt.network)+" ",1),o.info.status==="active"?(u(),S(f,{key:0,type:"spinner",size:"12px",style:{display:"inline-block"}})):k("",!0)]),_:1}),r(m,{span:"8",style:{"min-width":"140px"}},{default:i(()=>[s(l(o.opt.completedLengthStr)+" / "+l(o.opt.totalLengthStr),1)]),_:1}),r(m,{span:"8",style:{"min-width":"280px"}},{default:i(()=>[I,s(" "+l(o.opt.uploadSpeedStr)+" ",1),M,s(" "+l(o.opt.downloadSpeedStr)+"  剩余时间: "+l(o.getCastTime()),1)]),_:1})]),_:1})]),"right-icon":i(()=>[]),_:1})]),_:1},8,["to"])}const V=x(L,[["render",O]]);export{V as T};
